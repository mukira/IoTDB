<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_45) on Mon Mar 24 17:45:31 CET 2014 -->
<title>StreamOut (apache-cassandra API)</title>
<meta name="date" content="2014-03-24">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="StreamOut (apache-cassandra API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/StreamOut.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/cassandra/streaming/StreamInSession.html" title="class in org.apache.cassandra.streaming"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/apache/cassandra/streaming/StreamOutSession.html" title="class in org.apache.cassandra.streaming"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/cassandra/streaming/StreamOut.html" target="_top">Frames</a></li>
<li><a href="StreamOut.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.cassandra.streaming</div>
<h2 title="Class StreamOut" class="title">Class StreamOut</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.apache.cassandra.streaming.StreamOut</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">StreamOut</span>
extends java.lang.Object</pre>
<div class="block">This class handles streaming data from one node to another.

 The source node [the Out side] is always in charge of the streaming session.  Streams may
 be initiated either directly by the source via the methods in this class,
 or on demand from the target (via StreamRequest).

 Files to stream are grouped into sessions, which can have callbacks associated
 with them so that (for instance) we can mark a new node a full member of the
 cluster after all the data it needs has been streamed.

 The source begins a session by sending
 a Message with the stream bit flag in the Header turned on.  Part of that Message
 will include a StreamHeader that includes the files that will be streamed as part
 of that session, as well as the first file-to-be-streamed. (Combining session list
 and first file like this is inconvenient, but not as inconvenient as the old
 three-part send-file-list, wait-for-ack, start-first-file dance.)

 This is done over a separate TCP connection to avoid blocking ordinary intra-node
 traffic during the stream.  So there is no Handler for the main stream of data --
 when a connection sets the Stream bit, IncomingTcpConnection knows what to expect
 without any further Messages.

 After each file, the target node [the In side] will send a StreamReply indicating success
 (FILE_FINISHED) or failure (FILE_RETRY).

 When all files have been successfully transferred and integrated the target will
 send an additional SESSION_FINISHED reply and the session is complete.

 For Stream requests (for bootstrap), one subtlety is that we always have to
 create at least one stream reply, even if the list of files is empty, otherwise the
 target has no way to know that it can stop waiting for an answer.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../org/apache/cassandra/streaming/StreamOut.html#StreamOut()">StreamOut</a></strong>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/cassandra/streaming/StreamOut.html#transferRanges(java.net.InetAddress, org.apache.cassandra.db.Table, java.util.Collection, org.apache.cassandra.streaming.IStreamCallback, org.apache.cassandra.streaming.OperationType)">transferRanges</a></strong>(java.net.InetAddress&nbsp;target,
              <a href="../../../../org/apache/cassandra/db/Table.html" title="class in org.apache.cassandra.db">Table</a>&nbsp;table,
              java.util.Collection&lt;<a href="../../../../org/apache/cassandra/dht/Range.html" title="class in org.apache.cassandra.dht">Range</a>&lt;<a href="../../../../org/apache/cassandra/dht/Token.html" title="class in org.apache.cassandra.dht">Token</a>&gt;&gt;&nbsp;ranges,
              <a href="../../../../org/apache/cassandra/streaming/IStreamCallback.html" title="interface in org.apache.cassandra.streaming">IStreamCallback</a>&nbsp;callback,
              <a href="../../../../org/apache/cassandra/streaming/OperationType.html" title="enum in org.apache.cassandra.streaming">OperationType</a>&nbsp;type)</code>
<div class="block">Stream the given ranges to the target endpoint from each CF in the given keyspace.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/cassandra/streaming/StreamOut.html#transferRanges(java.net.InetAddress, org.apache.cassandra.db.Table, java.lang.Iterable, java.util.Collection, org.apache.cassandra.streaming.IStreamCallback, org.apache.cassandra.streaming.OperationType)">transferRanges</a></strong>(java.net.InetAddress&nbsp;target,
              <a href="../../../../org/apache/cassandra/db/Table.html" title="class in org.apache.cassandra.db">Table</a>&nbsp;table,
              java.lang.Iterable&lt;<a href="../../../../org/apache/cassandra/db/ColumnFamilyStore.html" title="class in org.apache.cassandra.db">ColumnFamilyStore</a>&gt;&nbsp;cfses,
              java.util.Collection&lt;<a href="../../../../org/apache/cassandra/dht/Range.html" title="class in org.apache.cassandra.dht">Range</a>&lt;<a href="../../../../org/apache/cassandra/dht/Token.html" title="class in org.apache.cassandra.dht">Token</a>&gt;&gt;&nbsp;ranges,
              <a href="../../../../org/apache/cassandra/streaming/IStreamCallback.html" title="interface in org.apache.cassandra.streaming">IStreamCallback</a>&nbsp;callback,
              <a href="../../../../org/apache/cassandra/streaming/OperationType.html" title="enum in org.apache.cassandra.streaming">OperationType</a>&nbsp;type)</code>
<div class="block">Stream the given ranges to the target endpoint for provided CFs in the given keyspace.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/cassandra/streaming/StreamOut.html#transferRanges(org.apache.cassandra.streaming.StreamOutSession, java.lang.Iterable, java.util.Collection, org.apache.cassandra.streaming.OperationType)">transferRanges</a></strong>(<a href="../../../../org/apache/cassandra/streaming/StreamOutSession.html" title="class in org.apache.cassandra.streaming">StreamOutSession</a>&nbsp;session,
              java.lang.Iterable&lt;<a href="../../../../org/apache/cassandra/db/ColumnFamilyStore.html" title="class in org.apache.cassandra.db">ColumnFamilyStore</a>&gt;&nbsp;cfses,
              java.util.Collection&lt;<a href="../../../../org/apache/cassandra/dht/Range.html" title="class in org.apache.cassandra.dht">Range</a>&lt;<a href="../../../../org/apache/cassandra/dht/Token.html" title="class in org.apache.cassandra.dht">Token</a>&gt;&gt;&nbsp;ranges,
              <a href="../../../../org/apache/cassandra/streaming/OperationType.html" title="enum in org.apache.cassandra.streaming">OperationType</a>&nbsp;type)</code>
<div class="block">Stream the given ranges to the target endpoint from each of the given CFs.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/cassandra/streaming/StreamOut.html#transferRanges(org.apache.cassandra.streaming.StreamOutSession, java.lang.Iterable, java.util.Collection, org.apache.cassandra.streaming.OperationType, boolean)">transferRanges</a></strong>(<a href="../../../../org/apache/cassandra/streaming/StreamOutSession.html" title="class in org.apache.cassandra.streaming">StreamOutSession</a>&nbsp;session,
              java.lang.Iterable&lt;<a href="../../../../org/apache/cassandra/db/ColumnFamilyStore.html" title="class in org.apache.cassandra.db">ColumnFamilyStore</a>&gt;&nbsp;cfses,
              java.util.Collection&lt;<a href="../../../../org/apache/cassandra/dht/Range.html" title="class in org.apache.cassandra.dht">Range</a>&lt;<a href="../../../../org/apache/cassandra/dht/Token.html" title="class in org.apache.cassandra.dht">Token</a>&gt;&gt;&nbsp;ranges,
              <a href="../../../../org/apache/cassandra/streaming/OperationType.html" title="enum in org.apache.cassandra.streaming">OperationType</a>&nbsp;type,
              boolean&nbsp;flushTables)</code>
<div class="block">Stream the given ranges to the target endpoint from each of the given CFs.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/cassandra/streaming/StreamOut.html#transferSSTables(org.apache.cassandra.streaming.StreamOutSession, java.lang.Iterable, java.util.Collection, org.apache.cassandra.streaming.OperationType)">transferSSTables</a></strong>(<a href="../../../../org/apache/cassandra/streaming/StreamOutSession.html" title="class in org.apache.cassandra.streaming">StreamOutSession</a>&nbsp;session,
                java.lang.Iterable&lt;<a href="../../../../org/apache/cassandra/io/sstable/SSTableReader.html" title="class in org.apache.cassandra.io.sstable">SSTableReader</a>&gt;&nbsp;sstables,
                java.util.Collection&lt;<a href="../../../../org/apache/cassandra/dht/Range.html" title="class in org.apache.cassandra.dht">Range</a>&lt;<a href="../../../../org/apache/cassandra/dht/Token.html" title="class in org.apache.cassandra.dht">Token</a>&gt;&gt;&nbsp;ranges,
                <a href="../../../../org/apache/cassandra/streaming/OperationType.html" title="enum in org.apache.cassandra.streaming">OperationType</a>&nbsp;type)</code>
<div class="block">Low-level transfer of matching portions of a group of sstables from a single table to the target endpoint.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="StreamOut()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>StreamOut</h4>
<pre>public&nbsp;StreamOut()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="transferRanges(java.net.InetAddress, org.apache.cassandra.db.Table, java.util.Collection, org.apache.cassandra.streaming.IStreamCallback, org.apache.cassandra.streaming.OperationType)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>transferRanges</h4>
<pre>public static&nbsp;void&nbsp;transferRanges(java.net.InetAddress&nbsp;target,
                  <a href="../../../../org/apache/cassandra/db/Table.html" title="class in org.apache.cassandra.db">Table</a>&nbsp;table,
                  java.util.Collection&lt;<a href="../../../../org/apache/cassandra/dht/Range.html" title="class in org.apache.cassandra.dht">Range</a>&lt;<a href="../../../../org/apache/cassandra/dht/Token.html" title="class in org.apache.cassandra.dht">Token</a>&gt;&gt;&nbsp;ranges,
                  <a href="../../../../org/apache/cassandra/streaming/IStreamCallback.html" title="interface in org.apache.cassandra.streaming">IStreamCallback</a>&nbsp;callback,
                  <a href="../../../../org/apache/cassandra/streaming/OperationType.html" title="enum in org.apache.cassandra.streaming">OperationType</a>&nbsp;type)</pre>
<div class="block">Stream the given ranges to the target endpoint from each CF in the given keyspace.</div>
</li>
</ul>
<a name="transferRanges(java.net.InetAddress, org.apache.cassandra.db.Table, java.lang.Iterable, java.util.Collection, org.apache.cassandra.streaming.IStreamCallback, org.apache.cassandra.streaming.OperationType)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>transferRanges</h4>
<pre>public static&nbsp;void&nbsp;transferRanges(java.net.InetAddress&nbsp;target,
                  <a href="../../../../org/apache/cassandra/db/Table.html" title="class in org.apache.cassandra.db">Table</a>&nbsp;table,
                  java.lang.Iterable&lt;<a href="../../../../org/apache/cassandra/db/ColumnFamilyStore.html" title="class in org.apache.cassandra.db">ColumnFamilyStore</a>&gt;&nbsp;cfses,
                  java.util.Collection&lt;<a href="../../../../org/apache/cassandra/dht/Range.html" title="class in org.apache.cassandra.dht">Range</a>&lt;<a href="../../../../org/apache/cassandra/dht/Token.html" title="class in org.apache.cassandra.dht">Token</a>&gt;&gt;&nbsp;ranges,
                  <a href="../../../../org/apache/cassandra/streaming/IStreamCallback.html" title="interface in org.apache.cassandra.streaming">IStreamCallback</a>&nbsp;callback,
                  <a href="../../../../org/apache/cassandra/streaming/OperationType.html" title="enum in org.apache.cassandra.streaming">OperationType</a>&nbsp;type)</pre>
<div class="block">Stream the given ranges to the target endpoint for provided CFs in the given keyspace.</div>
</li>
</ul>
<a name="transferRanges(org.apache.cassandra.streaming.StreamOutSession, java.lang.Iterable, java.util.Collection, org.apache.cassandra.streaming.OperationType)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>transferRanges</h4>
<pre>public static&nbsp;void&nbsp;transferRanges(<a href="../../../../org/apache/cassandra/streaming/StreamOutSession.html" title="class in org.apache.cassandra.streaming">StreamOutSession</a>&nbsp;session,
                  java.lang.Iterable&lt;<a href="../../../../org/apache/cassandra/db/ColumnFamilyStore.html" title="class in org.apache.cassandra.db">ColumnFamilyStore</a>&gt;&nbsp;cfses,
                  java.util.Collection&lt;<a href="../../../../org/apache/cassandra/dht/Range.html" title="class in org.apache.cassandra.dht">Range</a>&lt;<a href="../../../../org/apache/cassandra/dht/Token.html" title="class in org.apache.cassandra.dht">Token</a>&gt;&gt;&nbsp;ranges,
                  <a href="../../../../org/apache/cassandra/streaming/OperationType.html" title="enum in org.apache.cassandra.streaming">OperationType</a>&nbsp;type)</pre>
<div class="block">Stream the given ranges to the target endpoint from each of the given CFs.</div>
</li>
</ul>
<a name="transferRanges(org.apache.cassandra.streaming.StreamOutSession, java.lang.Iterable, java.util.Collection, org.apache.cassandra.streaming.OperationType, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>transferRanges</h4>
<pre>public static&nbsp;void&nbsp;transferRanges(<a href="../../../../org/apache/cassandra/streaming/StreamOutSession.html" title="class in org.apache.cassandra.streaming">StreamOutSession</a>&nbsp;session,
                  java.lang.Iterable&lt;<a href="../../../../org/apache/cassandra/db/ColumnFamilyStore.html" title="class in org.apache.cassandra.db">ColumnFamilyStore</a>&gt;&nbsp;cfses,
                  java.util.Collection&lt;<a href="../../../../org/apache/cassandra/dht/Range.html" title="class in org.apache.cassandra.dht">Range</a>&lt;<a href="../../../../org/apache/cassandra/dht/Token.html" title="class in org.apache.cassandra.dht">Token</a>&gt;&gt;&nbsp;ranges,
                  <a href="../../../../org/apache/cassandra/streaming/OperationType.html" title="enum in org.apache.cassandra.streaming">OperationType</a>&nbsp;type,
                  boolean&nbsp;flushTables)</pre>
<div class="block">Stream the given ranges to the target endpoint from each of the given CFs.</div>
</li>
</ul>
<a name="transferSSTables(org.apache.cassandra.streaming.StreamOutSession, java.lang.Iterable, java.util.Collection, org.apache.cassandra.streaming.OperationType)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>transferSSTables</h4>
<pre>public static&nbsp;void&nbsp;transferSSTables(<a href="../../../../org/apache/cassandra/streaming/StreamOutSession.html" title="class in org.apache.cassandra.streaming">StreamOutSession</a>&nbsp;session,
                    java.lang.Iterable&lt;<a href="../../../../org/apache/cassandra/io/sstable/SSTableReader.html" title="class in org.apache.cassandra.io.sstable">SSTableReader</a>&gt;&nbsp;sstables,
                    java.util.Collection&lt;<a href="../../../../org/apache/cassandra/dht/Range.html" title="class in org.apache.cassandra.dht">Range</a>&lt;<a href="../../../../org/apache/cassandra/dht/Token.html" title="class in org.apache.cassandra.dht">Token</a>&gt;&gt;&nbsp;ranges,
                    <a href="../../../../org/apache/cassandra/streaming/OperationType.html" title="enum in org.apache.cassandra.streaming">OperationType</a>&nbsp;type)</pre>
<div class="block">Low-level transfer of matching portions of a group of sstables from a single table to the target endpoint.
 You should probably call transferRanges instead. This moreover assumes that references have been acquired on the sstables.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/StreamOut.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/cassandra/streaming/StreamInSession.html" title="class in org.apache.cassandra.streaming"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/apache/cassandra/streaming/StreamOutSession.html" title="class in org.apache.cassandra.streaming"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/cassandra/streaming/StreamOut.html" target="_top">Frames</a></li>
<li><a href="StreamOut.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &copy; 2014 The Apache Software Foundation</small></p>
</body>
</html>
